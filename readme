# ğŸ§  Amazon Seller Tracker â€“ FastAPI Backend

This backend powers a SaaS that helps users track Amazon sellers and automatically detect new products those sellers list. It uses the Keepa API, Supabase, Redis, and Celery to deliver fast and scalable alerts.

---

## âš™ï¸ Features

- ğŸ” Track Amazon seller storefronts
- ğŸš¨ Detect new ASINs added by sellers
- ğŸ›’ Enrich product info using Keepa API
- ğŸ’¬ Alert users of new products in real-time
- ğŸ“Š User dashboard with saved products & limits
- ğŸ§  Token-aware API usage and queue management
- ğŸ§ª Fully modular FastAPI app with Celery workers

---

## ğŸ“ Project Structure

app/
â”œâ”€â”€ main.py # FastAPI entry point
â”œâ”€â”€ config.py # ENV + constants
â”œâ”€â”€ celery_worker.py # Celery app
â”‚
â”œâ”€â”€ api/ # Route handlers
â”‚ â”œâ”€â”€ alerts.py
â”‚ â”œâ”€â”€ auth.py
â”‚ â”œâ”€â”€ saved_products.py
â”‚ â”œâ”€â”€ seller.py
â”‚ â”œâ”€â”€ summary.py
â”‚ â””â”€â”€ user.py
â”‚
â”œâ”€â”€ auth/ # JWT decoding
â”‚ â””â”€â”€ supabase_jwt.py
â”‚
â”œâ”€â”€ db/ # Supabase client
â”‚ â””â”€â”€ supabase.py
â”‚
â”œâ”€â”€ models/ # Pydantic + DB models
â”‚ â”œâ”€â”€ schemas.py
â”‚ â”œâ”€â”€ db_tables.py
â”‚ â””â”€â”€ enums.py
â”‚
â”œâ”€â”€ services/ # Business logic
â”‚ â”œâ”€â”€ alert_service.py
â”‚ â”œâ”€â”€ keepa_service.py
â”‚ â”œâ”€â”€ product_service.py
â”‚ â””â”€â”€ seller_service.py
â”‚
â”œâ”€â”€ workers/ # Celery tasks
â”‚ â”œâ”€â”€ queue_runner.py
â”‚ â”œâ”€â”€ scan_sellers.py
â”‚ â””â”€â”€ token_manager.py
â”‚
â”œâ”€â”€ utils/ # Helpers
â”‚ â”œâ”€â”€ cache.py
â”‚ â””â”€â”€ logger.py
â”‚
â”œâ”€â”€ requirements.txt

yaml
Copy
Edit

---

## ğŸ“¦ Environment Variables (`.env`)

Create a `.env` file with the following keys:

```env
KEEPPA_API_KEY=your_keepa_key
SUPABASE_URL=https://xyz.supabase.co
SUPABASE_KEY=your_anon_or_service_key
JWT_SECRET=your_supabase_jwt_secret

REDIS_URL=redis://localhost:6379/0
DAILY_TOKEN_LIMIT=1440
TOKENS_PER_SELLER_SCAN=50
CORS_ORIGINS=http://localhost:3000
ğŸš€ Running Locally
Install dependencies:

bash
Copy
Edit
pip install -r requirements.txt
Run FastAPI:

bash
Copy
Edit
uvicorn app.main:app --reload
Run Celery:

bash
Copy
Edit
celery -A app.celery_worker.celery_app worker --loglevel=info
ğŸ” How It Works
Users track sellers via /seller/track

Sellers are scanned every 24h via Celery queue

New ASINs â†’ Product details â†’ Alerts â†’ Dashboard

System respects API limits using token_status

ğŸ§ª Tech Stack
FastAPI â€” backend framework

Supabase â€” user auth + DB

Keepa API â€” Amazon data

Celery + Redis â€” background tasks

Pydantic â€” data validation

